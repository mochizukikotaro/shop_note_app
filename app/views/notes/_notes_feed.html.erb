
<%= form_with url: note_path do |f| %>
  <% if @feed.present? %>
    <% @feed.each do |i| %>
    <div class="note_user">
    <%= i.user.name %>
    </div>
    <%= check_box_tag 'i[id][]', i.id, checked = false, :id => "note_#{i.id}" %>


    <button type="button" class="btn lite">
    <div class="note">
    <%= i.content %>
    </div>
    <div class="comment">
        <% i.comments.each do |c| %>
          <li class="comment_list">
            <%= link_to c.content ,"/comments/#{c.id}", method: :delete,data:{confirm: "本当に削除しますか?"} %>
            <!-- <span> : </span> -->
            <%# <%= c.user.name %>
          </li>
        <% end%>
    </div>
    </button>


      <!-- <div class="dropdown-menu" aria-labelledby="dropdown1"> -->
      　  <button type="button" class="btn" data-toggle="modal" data-target="#comment_Modal">コメント入力</button>
      <!-- </div> -->
    <!-- </div> -->



    <div class="time"><%= i.created_at.to_s(:datetime) %></div>

    <% end %>
  <% else %>

    <p>現在買うものはありません</p>

  <% end %>

  <div class = "destroy">
        <%= f.submit '購入済み', class: 'btn btn btn-primary' %>
      </div>
<% end %>



<div class="modal fade" id="comment_Modal" tabindex="-1" role="dialog" aria-labelledby="comment_ModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <%= form_with url: comment_path do |f| %>
        <h4 class="modal-title" id="comment_ModalLabel">コメント入力欄</h4>
          <div class="modal-body">

              <%= f.text_area :content, size: "10x5", class: "form-control" %>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">戻る</button>
            <%= f.submit "投稿する", class: "btn btn-primary" %>
          </div>
      <% end %>
    </div>
  </div>
</div>


<script type="text/javascript">

$('#comment_Modal').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) //モーダルを呼び出すときに使われたボタンを取得
  var recipient = button.data('whatever') //data-whatever の値を取得

  //Ajaxの処理はここに

  var modal = $(this)  //モーダルを取得
  modal.find('.modal-body input#recipient-name').val(recipient) //inputタグにも表示
})

</script>
